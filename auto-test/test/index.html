<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="x5-fullscreen" content="true"><meta name="full-screen" content="yes"><meta name="theme-color" content="#317EFB"><meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=0" name="viewport"><meta name="description" content="å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå‰ç«¯æµ‹è¯•æ¡†æ¶JEST"><meta property="og:type" content="article"><meta property="og:title" content="å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯• ã€JESTã€‘"><meta property="og:url" content="https://www.yangchenyu.top/auto-test/test/index.html"><meta property="og:site_name"><meta property="og:description" content="å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå‰ç«¯æµ‹è¯•æ¡†æ¶JEST"><meta property="og:locale"><meta property="article:published_time" content="2020-12-16T06:36:51.000Z"><meta property="article:modified_time" content="2026-01-21T15:16:41.094Z"><meta property="article:author" content="CHENY"><meta property="article:tag" content="è‡ªåŠ¨åŒ–æµ‹è¯•"><meta name="twitter:card" content="summary"><meta name="keywords" content="å‰ç«¯å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ã€JESTã€å•å…ƒæµ‹è¯•"><title>å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯• ã€JESTã€‘</title><link href="/favicon-16x16.png?v=1.2.14" rel="icon" type="image/png" sizes="16x16"><link href="/favicon-32x32.png?v=1.2.14" rel="icon" type="image/png" sizes="32x32"><link href="/apple-touch-icon.png?v=1.2.14" rel="apple-touch-icon" sizes="180x180"><link href="/site.webmanifest" rel="manifest"><link rel="stylesheet" href="/css/plugins/bootstrap.row.css"><link rel="stylesheet" href="https://unpkg.com/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css"><link rel="stylesheet" href="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.css"><link rel="stylesheet" href="/css/plugins/font-awesome.min.css"><script>window.ASYNC_CONFIG={hostname:"www.yangchenyu.top",author:"CHENY",root:"/",typed_text:["Aspirant Developer"],favicon:{logo:"https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/blog-logo.png",icon16:"favicon-16x16.png",icon32:"favicon-32x32.png",appleTouchIcon:"apple-touch-icon.png",webmanifest:"/site.webmanifest",visibilitychange:!1,hidden:"/failure.ico",showText:"(/â‰§â–½â‰¦/)å’¦ï¼åˆå¥½äº†ï¼",hideText:"(â—â€”â—)å–”å“Ÿï¼Œå´©æºƒå•¦ï¼"},theme_version:"1.2.14",theme:{switch:!0,default:"auto"},search:{enable:!0,type:"local",href:"https://www.google.com/search?q=site:",domain:null,preload:!0,trigger:"auto",path:"search.xml"},i18n:{placeholder:"æœç´¢...",empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}",hits:"æ‰¾åˆ° ${hits} æ¡ç»“æœ",hits_time:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰",author:"æœ¬æ–‡ä½œè€…ï¼š",copyright_link:"æœ¬æ–‡é“¾æ¥ï¼š",copyright_license_title:"ç‰ˆæƒå£°æ˜ï¼š",copyright_license_content:"æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ undefined è®¸å¯åè®®ã€‚",copy_button:"å¤åˆ¶",copy_success:"å¤åˆ¶æˆåŠŸ",copy_failure:"å¤åˆ¶å¤±è´¥",open_read_mode:"è¿›å…¥é˜…è¯»æ¨¡å¼",exit_read_mode:"é€€å‡ºé˜…è¯»æ¨¡å¼"},creative_commons:{license:"by-nc-sa",language:"deed.zh",post:!0,clipboard:!1},swup:!0,plugin:{flickr_justified_gallery:{js:"https://unpkg.com/flickr-justified-gallery@latest/dist/fjGallery.min.js"},fancybox:{css:"https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.css",js:"https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"}},icons:{sun:"far fa-sun",moon:"far fa-moon",play:"fas fa-play",email:"far fa-envelope",next:"fas fa-arrow-right",calendar:"far fa-calendar-alt",clock:"far fa-clock",user:"far fa-user",back_top:"fas fa-arrow-up",close:"fas fa-times",search:"fas fa-search",reward:"fas fa-hand-holding-usd",user_tag:"fas fa-user-alt",toc_tag:"fas fa-th-list",read:"fas fa-book-reader",arrows:"fas fa-arrows-alt-h"}}</script><link data-swup-theme rel="stylesheet" href="/css/index.css?v=1.2.14" id="trm-switch-style"><script>let defaultMode="auto"!==ASYNC_CONFIG.theme.default?ASYNC_CONFIG.theme.default:window.matchMedia("(prefers-color-scheme: light)").matches?"style-light":"style-dark",catchMode=localStorage.getItem("theme-mode")||defaultMode,type="style-dark"===catchMode?"add":"remove";document.documentElement.classList[type]("dark")</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?bbad9d8e1fd8e044d365c2ce0d114c73";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="null" type="application/atom+xml">
</head><body><div class="trm-app-frame"><div class="trm-preloader"><div class="trm-holder"><div class="preloader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div><div class="trm-mode-swich-animation-frame"><div class="trm-mode-swich-animation"><i class="i-sun"><i class="iconfont far fa-sun"></i></i><div class="trm-horizon"></div><i class="i-moon"><i class="iconfont far fa-moon"></i></i></div></div><div id="trm-dynamic-content" class="trm-swup-animation"><div id="trm-scroll-container" class="trm-scroll-container" data-scroll-container style="opacity:0"><div data-scroll-section id="content" class="trm-scroll-section"><div class="locomotive-scroll__sticky-target" style="position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none"></div><header class="trm-top-bar" data-scroll data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10"><div class="container"><div class="trm-left-side"><a href="/" class="trm-logo-frame trm-anima-link"><img alt="logo" src="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/blog-logo.png"></a></div><div class="trm-right-side"><div class="trm-menu"><nav><ul><li class="menu-item-has-children"><a href="/" target="">Home</a></li><li class="menu-item-has-children"><a href="/archives/" target="">Archives</a></li><li class="menu-item-has-children"><a href="/links/" target="">Links</a></li><li class="menu-item-has-children"><a href="/about/" target="">About</a><ul><li><a href="/projects/" target="">Projects</a></li><li><a data-no-swup href="https://foreverblog.cn/go.html" target="_blank">Forever Go</a></li></ul></li></ul></nav></div><div class="trm-mode-switcher-place"><div class="trm-mode-switcher"><i class="iconfont far fa-sun"></i> <input class="tgl tgl-light" id="trm-swich" type="checkbox"> <label class="trm-swich" for="trm-swich"></label> <i class="iconfont far fa-moon"></i></div></div><div id="trm-search-btn" class="trm-search-btn"><i class="iconfont fas fa-search"></i></div></div><div class="trm-menu-btn"><span></span></div></div></header><div class="trm-content-start"><div class="trm-banner" data-scroll data-scroll-direction="vertical"><img style="object-position:top;object-fit:cover" alt="banner" class="trm-banner-cover" data-scroll data-scroll-direction="vertical" data-scroll-speed="-3" src="/img/banner.png"><div class="trm-banner-content trm-overlay"><div class="container" data-scroll data-scroll-direction="vertical" data-scroll-speed="0"><div class="row"><div class="col-lg-4"></div><div class="col-lg-8"><div class="trm-banner-text"><div class="trm-label trm-mb-20">NEWS LETTER</div><h1 class="trm-mb-30 trm-hsmb-font">å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯• ã€JESTã€‘</h1><ul class="trm-breadcrumbs trm-label"><li><a href="/" class="trm-anima-link">Home</a></li><li><span>auto-test</span></li></ul></div><a href="#about-triger" data-scroll-to="#about-triger" data-scroll-offset="-130" class="trm-scroll-hint-frame"><div class="trm-scroll-hint"></div><span class="trm-label">Scroll down</span></a></div></div></div></div></div><div class="container"><div class="row"><div id="page-sidebar" class="col-lg-4 hidden-sm"><div class="trm-main-card-frame trm-sidebar"><div class="trm-main-card" data-scroll data-scroll-repeat data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="60"><div class="trm-user-tabs" id="sidebar-tabs"><div class="trm-tabs-nav trm-mb-40" id="trm-tabs-nav"><div data-to="tabs-user" class="trm-tabs-nav-item"><i class="iconfont fas fa-user-alt"></i></div><div data-to="tabs-toc" class="trm-tabs-nav-item active"><i class="iconfont fas fa-th-list"></i></div></div><div name="tabs-user" class="trm-tabs-item"><div class="trm-mc-header"><div class="trm-avatar-frame trm-mb-20"><img alt="Avatar" class="trm-avatar" src="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/ip.jpg"></div><h5 class="trm-name trm-mb-15">CHENY</h5><div class="trm-label">I`m <span class="trm-typed-text"></span></div></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="trm-social"><a href="https://github.com/ChenyCHENYU" title="Github" rel="nofollow" target="_blank"><i class="iconfont fab fa-github"></i> </a><a href="https://gitee.com/ycyplus163" title="Gitee" rel="nofollow" target="_blank"><i class="iconfont fab fa-github-alt"></i> </a><a href="https://www.tzagileteam.com/" title="AgileTeam" rel="nofollow" target="_blank"><i class="iconfont fas fa-blog"></i></a></div><div class="trm-divider trm-mb-40 trm-mt-40"></div><ul class="trm-table trm-mb-20"><li><div class="trm-label">Residence:</div><div class="trm-label trm-label-light">China</div></li><li><div class="trm-label">City:</div><div class="trm-label trm-label-light">Xi'An</div></li><li><div class="trm-label">Age:</div><div class="trm-label trm-label-light">33</div></li></ul><div class="trm-divider trm-mb-40 trm-mt-40"></div><div class="text-center"><a href="mailto:ycyplus@gmail.com" class="trm-btn">è”ç³»æˆ‘ <i class="iconfont far fa-envelope"></i></a></div></div><div name="tabs-toc" class="trm-tabs-item active"><div class="post-toc"><ol class="toc"><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#JEST-æ¡†æ¶çš„å®‰è£…ä½¿ç”¨" data-scroll-to="#JEST-æ¡†æ¶çš„å®‰è£…ä½¿ç”¨"><span class="toc-number">1.</span> <span class="toc-text">JEST æ¡†æ¶çš„å®‰è£…ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-çš„é…ç½®" data-scroll-to="#JEST-çš„é…ç½®"><span class="toc-number">1.1.</span> <span class="toc-text">JEST çš„é…ç½®</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-ä¸­çš„åŒ¹é…å™¨" data-scroll-to="#JEST-ä¸­çš„åŒ¹é…å™¨"><span class="toc-number">1.2.</span> <span class="toc-text">JEST ä¸­çš„åŒ¹é…å™¨</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-å‘½ä»¤å·¥å…·çš„ä½¿ç”¨" data-scroll-to="#JEST-å‘½ä»¤å·¥å…·çš„ä½¿ç”¨"><span class="toc-number">1.3.</span> <span class="toc-text">JEST å‘½ä»¤å·¥å…·çš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•" data-scroll-to="#å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"><span class="toc-number">1.4.</span> <span class="toc-text">å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-ä¸­çš„é’©å­å‡½æ•°" data-scroll-to="#JEST-ä¸­çš„é’©å­å‡½æ•°"><span class="toc-number">1.5.</span> <span class="toc-text">JEST ä¸­çš„é’©å­å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-ä¸­çš„-Mock" data-scroll-to="#JEST-ä¸­çš„-Mock"><span class="toc-number">1.6.</span> <span class="toc-text">JEST ä¸­çš„ Mock</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-ä¸­çš„-Snapshop-å¿«ç…§æµ‹è¯•" data-scroll-to="#JEST-ä¸­çš„-Snapshop-å¿«ç…§æµ‹è¯•"><span class="toc-number">1.7.</span> <span class="toc-text">JEST ä¸­çš„ Snapshop å¿«ç…§æµ‹è¯•</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#ES6-ä¸­-ç±»çš„æµ‹è¯•-ï¼ˆå•å…ƒæµ‹è¯•ï¼‰" data-scroll-to="#ES6-ä¸­-ç±»çš„æµ‹è¯•-ï¼ˆå•å…ƒæµ‹è¯•ï¼‰"><span class="toc-number">1.8.</span> <span class="toc-text">ES6 ä¸­ ç±»çš„æµ‹è¯• ï¼ˆå•å…ƒæµ‹è¯•ï¼‰</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#JEST-ä¸­å¯¹-DOM-è¿›è¡Œæµ‹è¯•" data-scroll-to="#JEST-ä¸­å¯¹-DOM-è¿›è¡Œæµ‹è¯•"><span class="toc-number">1.9.</span> <span class="toc-text">JEST ä¸­å¯¹ DOM è¿›è¡Œæµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a rel="nofollow" class="toc-link" href="#Vue-ä¸­çš„-TDD" data-scroll-to="#Vue-ä¸­çš„-TDD"><span class="toc-number">2.</span> <span class="toc-text">Vue ä¸­çš„ TDD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘" data-scroll-to="#Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘"><span class="toc-number">2.1.</span> <span class="toc-text">Test Driven Development (TDD) æµ‹è¯•é©±åŠ¨å¼€å‘</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#Vue-ç¯å¢ƒä¸­é…ç½®-JEST" data-scroll-to="#Vue-ç¯å¢ƒä¸­é…ç½®-JEST"><span class="toc-number">2.2.</span> <span class="toc-text">Vue ç¯å¢ƒä¸­é…ç½® JEST</span></a></li><li class="toc-item toc-level-3"><a rel="nofollow" class="toc-link" href="#å¸¸ç”¨çš„ä¸€äº›-API" data-scroll-to="#å¸¸ç”¨çš„ä¸€äº›-API"><span class="toc-number">2.3.</span> <span class="toc-text">å¸¸ç”¨çš„ä¸€äº› API</span></a></li></ol></li></ol></div></div></div></div></div></div><div id="page-content" class="col-lg-8"><div class="trm-content" id="trm-content"><div data-scroll data-scroll-repeat data-scroll-offset="500" id="about-triger"></div><div id="post-info" class="row hidden-sm"><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><i class="iconfont far fa-calendar-alt trm-icon"></i><br>12/16</div></div><div class="col-sm-4"><div class="trm-card trm-label trm-label-light text-center"><i class="iconfont far fa-clock trm-icon"></i><br>14:36</div></div><div class="col-sm-4"><div id="post-author" class="trm-card trm-label trm-label-light text-center"><i class="iconfont far fa-user trm-icon"></i><br>CHENY</div></div></div><div class="trm-card"><article id="article-container" class="trm-publication"><p>å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ JESTã€‚</p><h2 id="JEST-æ¡†æ¶çš„å®‰è£…ä½¿ç”¨"><a href="#JEST-æ¡†æ¶çš„å®‰è£…ä½¿ç”¨" class="headerlink" title="JEST æ¡†æ¶çš„å®‰è£…ä½¿ç”¨"></a>JEST æ¡†æ¶çš„å®‰è£…ä½¿ç”¨</h2><p>å®‰è£…ï¼š<code>npm install jest@24.8.0 -D</code> ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬ã€‚</p><p>package.json æ–‡ä»¶çš„ script é‡Œé¢çš„ test ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"><span class="comment">// ä¿®æ”¹äº†ä»¥å æ‰§è¡Œå‘½ä»¤å°±ä¼šå»æ‰¾å¸¦test.jsçš„åç¼€æ–‡ä»¶ å¹¶è‡ªåŠ¨ç›‘å¬</span></span><br><span class="line">  <span class="string">&quot;test&quot;</span>: <span class="string">&quot;jest --watchAll&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼š <code>npm run test</code>ã€‚</p><ul><li>å•å…ƒæµ‹è¯•ï¼šæ¨¡å—æµ‹è¯•ã€‚</li><li>é›†æˆæµ‹è¯•ï¼šå¤šæ¨¡å—æµ‹è¯•ã€‚</li></ul><p>expect(è¦æµ‹è¯•çš„)ï¼Œ .toBe(æ­¤æ–¹æ³•æœŸæœ›çš„ç»“æœ ) å®ƒæ˜¯ä¸€ä¸ªåŒ¹é…å™¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„ï¼Œjest æµ‹è¯•æ¡†æ¶æ”¯æŒ CommonJS æ¨¡å—åŒ–è§„èŒƒ</span></span><br><span class="line"><span class="comment">// xxx.test.jsæ–‡ä»¶  ===&gt; è¿™æ˜¯æµ‹è¯•æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> math = <span class="built_in">require</span>(<span class="string">&#x27;./math.js&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; add, minus, multi &#125; = math</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯•åŠ æ³• 3 + 7&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">add</span>(<span class="number">3</span>, <span class="number">7</span>)).<span class="title function_">toBe</span>(<span class="number">10</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯•å‡æ³• 3 - 3&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">minus</span>(<span class="number">3</span>, <span class="number">3</span>)).<span class="title function_">toBe</span>(<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯•ä¹˜æ³• 3 * 3&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">multi</span>(<span class="number">3</span>, <span class="number">3</span>)).<span class="title function_">toBe</span>(<span class="number">9</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯è¢«æµ‹è¯•æ–‡ä»¶  math.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minus</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">multi</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// ä½¿æµè§ˆå™¨ä¸æŠ¥é”™ ä½¿ç”¨ try catch</span></span><br><span class="line">  <span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    add,</span><br><span class="line">    minus,</span><br><span class="line">    multi,</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="JEST-çš„é…ç½®"><a href="#JEST-çš„é…ç½®" class="headerlink" title="JEST çš„é…ç½®"></a>JEST çš„é…ç½®</h3><p>é…ç½® JEST <code>npx jest --init</code>ã€‚</p><p>æ ¹æ®éœ€è¦é€‰æ‹© <code>node</code> æˆ–è€… æµè§ˆå™¨ç¯å¢ƒã€‚<br>å‰ä¸‰ä¸ªéƒ½é»˜è®¤<code>yes</code> ä¼šç”Ÿæˆ <code>jest.config.js</code> æ–‡ä»¶ã€‚<br>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¼šç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡çš„ç”³æ˜ ä¼šç”Ÿæˆä¸€ä¸ª <code>coverage</code> ç›®å½•ã€‚</p><p><code>npx jest --coverage</code></p><p>ä½¿ JEST è¯†åˆ« ES6 æ¨¡å—è¯­æ³•ï¼Œéœ€å®‰è£… babel <code>pm install @babel/core@7.4.5 @babel/preset-env@7.4.5 -D</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é…ç½®babel æ–°å»º.babelrc æ–‡ä»¶è¿›è¡Œé…ç½®</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;presets&quot;</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&quot;@babel/preset-env&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;targets&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;node&quot;</span>: <span class="string">&quot;current&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ ES6çš„æ¨¡å—è¯­æ³•</span></span><br></pre></td></tr></table></figure><h3 id="JEST-ä¸­çš„åŒ¹é…å™¨"><a href="#JEST-ä¸­çš„åŒ¹é…å™¨" class="headerlink" title="JEST ä¸­çš„åŒ¹é…å™¨"></a>JEST ä¸­çš„åŒ¹é…å™¨</h3><ol><li>æµ‹è¯•å€¼ç›¸ç­‰ï¼Œå®ƒæ— æ³•åŒ¹é…å¯¹è±¡å†…å®¹çš„å¼•ç”¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯•åŠ æ³• 3 + 7&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// toBe åŒ¹é…å™¨ matchers ç›¸å½“äº object.js ===</span></span><br><span class="line">  <span class="comment">// å­—ç¬¦ä¸² æ•°å€¼ å¸ƒå°”å€¼ ç®€å•ç±»å‹æ¨èä½¿ç”¨</span></span><br><span class="line">  <span class="title function_">expect</span>(<span class="number">10</span>).<span class="title function_">toBe</span>(<span class="number">10</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="2"><li>æµ‹è¯•å¯¹è±¡å†…å®¹ç›¸ç­‰</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯•å¯¹è±¡å†…å®¹ç›¸ç­‰&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// toEqual åŒ¹é…å™¨ å¼•ç”¨ç±»å‹æ¨èä½¿ç”¨</span></span><br><span class="line">  <span class="keyword">const</span> a = &#123; <span class="attr">one</span>: <span class="number">1</span> &#125;</span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toEqual</span>(&#123; <span class="attr">one</span>: <span class="number">1</span> &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="3"><li>å˜é‡å’Œ null è¿›è¡ŒåŒ¹é…</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;nullåŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// toBeNull åŒ¹é…å™¨</span></span><br><span class="line">  <span class="keyword">const</span> a = <span class="literal">null</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeNull</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="4"><li>çœŸå‡æœ‰å…³çš„åŒ¹é…å™¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeUndefined åŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="literal">undefined</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeUndefined</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeDefined åŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">1</span> <span class="comment">// å®šä¹‰è¿‡çš„æ‰å¯ä»¥</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeDefined</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeTruthy ç›¸å½“äºtrueåŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºçœŸçš„åŒ¹é…å™¨ ç›¸å½“äº true çš„æ¡ä»¶æ‰å¯ä»¥</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeTruthy</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeFalsy ç›¸å½“äºfalseåŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">0</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºå‡çš„åŒ¹é…å™¨ ç›¸å½“äº false çš„æ¡ä»¶æ‰å¯ä»¥</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeFalsy</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;not å–ååŒ¹é…å™¨&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">1</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="property">not</span>.<span class="title function_">toBeFalsy</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="5"><li>æ•°å­—ç›¸å…³çš„ åŒ¹é…å™¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¤§äºåŒ¹é…å™¨</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeGreaterThan&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">10</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeGreaterThan</span>(<span class="number">9</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°äºåŒ¹é…å™¨</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeLessThan&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">6</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeLessThan</span>(<span class="number">9</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤§äºç­‰äºåŒ¹é…å™¨</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeGreaterThanOrEqual&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">6</span></span><br><span class="line">  <span class="title function_">expect</span>(a).<span class="title function_">toBeGreaterThanOrEqual</span>(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toBeCloseTo&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="number">0.1</span></span><br><span class="line">  <span class="keyword">const</span> b = <span class="number">0.2</span></span><br><span class="line">  <span class="title function_">expect</span>(a + b).<span class="title function_">toBeCloseTo</span>(<span class="number">0.3</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="6"><li>å­—ç¬¦ä¸²ç›¸å…³çš„åŒ¹é…å™¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å¦åŒ…å«æŸä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toMatch&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> str = <span class="string">&#x27;http://www.dell-lee.com&#x27;</span></span><br><span class="line">  <span class="title function_">expect</span>(str).<span class="title function_">toMatch</span>(<span class="string">&#x27;dell&#x27;</span>) <span class="comment">// ä¹Ÿå¯ä»¥å†™è¡¨è¾¾å¼</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="7"><li>æ•°ç»„ç›¸å…³çš„åŒ¹é…å™¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ˜¯å¦æ•°ç»„åŒ…å«æŸä¸ªé¡¹</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toContain&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [<span class="string">&#x27;dell&#x27;</span>, <span class="string">&#x27;lee&#x27;</span>, <span class="string">&#x27;imooc&#x27;</span>]</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">new</span> <span class="title class_">Set</span>(arr)</span><br><span class="line">  <span class="title function_">expect</span>(data).<span class="title function_">toContain</span>(<span class="string">&#x27;dell&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ol start="8"><li>å¤„ç†å¼‚å¸¸çš„åŒ¹é…å™¨</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">throwNewErrorFunc</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;this is a new error&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;toThrow&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(throwNewErrorFunc).<span class="title function_">toThrow</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ğŸ”” æ³¨æ„ï¼šå¦‚æœå½“ä¸€ä¸ªæ–‡ä»¶ä¸­æµ‹è¯•ç”¨ä¾‹è¿‡å¤šï¼Œåªé’ˆå¯¹å…¶ä¸­ä¸€ä¸ªè¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥æ·»åŠ .onlyã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚</span></span><br><span class="line">test.<span class="title function_">only</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ addOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter.<span class="title function_">addOne</span>()</span><br><span class="line">  <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JEST-å‘½ä»¤å·¥å…·çš„ä½¿ç”¨"><a href="#JEST-å‘½ä»¤å·¥å…·çš„ä½¿ç”¨" class="headerlink" title="JEST å‘½ä»¤å·¥å…·çš„ä½¿ç”¨"></a>JEST å‘½ä»¤å·¥å…·çš„ä½¿ç”¨</h3><p>å½“æ‰§è¡Œæµ‹è¯•å‘½ä»¤ npm run test æµ‹è¯•ä»£ç çš„æ—¶å€™ä¼šæç¤º <code>w</code> åˆ‡æ¢ã€‚</p><p>f : f çš„æ„æ€æ˜¯ åªå¯¹ä¹‹å‰å½“å‰æ–‡ä»¶æµ‹è¯•å¤±è´¥çš„ä»£ç è¿›è¡Œæµ‹è¯• é€€å‡ºåœ¨ fã€‚<br>o : å½“æœ‰å¤šä¸ªæµ‹è¯•æ–‡ä»¶æµ‹è¯•çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å®ƒ æˆ–è€…æ”¹ watchAll ä¸º watchã€‚<br>t : è¿‡æ»¤æ¨¡å¼ éœ€è¦é’ˆå¯¹ pattern è¾“å…¥å¯¹åº”è¦æ£€æµ‹çš„æ¨¡å¼ã€‚<br>q : é€€å‡ºæ¨¡å¼ã€‚<br>p : å®ƒçš„ä½œç”¨æ˜¯ç±»ä¼¼æ­£åˆ™ä¸€æ ·ï¼Œæ£€æµ‹æ¯”å¦‚ è¾“å…¥ matchers å®ƒå°±ä¼šå»æ‰¾ç±»ä¼¼çš„æ–‡ä»¶ã€‚</p><h3 id="å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"><a href="#å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•" class="headerlink" title="å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"></a>å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å›è°ƒæ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">.<span class="property">js</span>æ–‡ä»¶</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params">fn</span>) =&gt; &#123;</span><br><span class="line">  axios.<span class="title function_">get</span>(<span class="string">&#x27;http://www.dell-lee.com/react/api/demo.json&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fn</span>(res.<span class="property">data</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨ done ä½œä¸ºå›è°ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸æ‰§è¡Œåé¢çš„è¯­å¥</span></span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span>æ–‡ä»¶</span><br><span class="line"><span class="keyword">import</span> &#123; fetchData &#125; <span class="keyword">from</span> <span class="string">&#x27;./fetchDate&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º &#123; success: true &#125;&#x27;</span>, <span class="function">(<span class="params">done</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fetchData</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(data).<span class="title function_">toEqual</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">done</span>()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ–¹æ³•2 ç›´æ¥è¿”å›Promise æ¨è</span></span><br><span class="line">.<span class="property">js</span> æ–‡ä»¶</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;http://www.dell-lee.com/react/api/demo.json&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span> æ–‡ä»¶</span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º &#123; success: true &#125;&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(res.<span class="property">data</span>).<span class="title function_">toEqual</span>(&#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœéœ€è¦æ»¡è¶³404 ç±»ä¼¼é”™è¯¯çš„ç»“æœ</span></span><br><span class="line"><span class="comment">// æ¯”å¦‚ è¾“é”™äº†è¯·æ±‚åœ°å€</span></span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º 404&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  expect.<span class="title function_">assertions</span>(<span class="number">1</span>)  <span class="comment">// ä½¿ç”¨ catch ä¸€å®šè®°å¾—ç”¨å®ƒ</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetchData</span>().<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(e.<span class="title function_">toString</span>().<span class="title function_">indexOf</span>(<span class="string">&#x27;404&#x27;</span>) &gt; <span class="number">1</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å¦ä¸€ç§å¤„ç†å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"><a href="#å¦ä¸€ç§å¤„ç†å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•" class="headerlink" title="å¦ä¸€ç§å¤„ç†å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•"></a>å¦ä¸€ç§å¤„ç†å¼‚æ­¥ä»£ç çš„æµ‹è¯•æ–¹æ³•</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º &#123; success: true &#125;&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ˜¯å¦åŒ…å«è¿™ä¸ªå­å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">expect</span>(<span class="title function_">fetchData</span>()).<span class="property">resolves</span>.<span class="title function_">toMatchObject</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---------  è¿˜å¯ä»¥ç”¨ async await æ–¹å¼å†™</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º 404&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  expect.<span class="title function_">assertions</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">fetchData</span>().<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(e.<span class="title function_">toString</span>().<span class="title function_">indexOf</span>(<span class="string">&#x27;404&#x27;</span>) &gt; <span class="number">1</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•å¤„ç†å¤±è´¥çš„æƒ…å†µ</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º &#123; success: true &#125;&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">expect</span>(<span class="title function_">fetchData</span>()).<span class="property">rejects</span>.<span class="title function_">toThrow</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ¨èå†™æ³•"><a href="#æ¨èå†™æ³•" class="headerlink" title="æ¨èå†™æ³•"></a>æ¨èå†™æ³•</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º &#123; success: true &#125;&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetchData</span>()</span><br><span class="line">  <span class="title function_">expect</span>(res.<span class="property">data</span>).<span class="title function_">toEqual</span>(&#123;</span><br><span class="line">    <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchData è¿”å›ç»“æœä¸º 404&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  expect.<span class="title function_">assertions</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">fetchData</span>()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="title function_">expect</span>(e.<span class="title function_">toString</span>()).<span class="title function_">toEqual</span>(<span class="string">&#x27;Error: Request failed with status code 404&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JEST-ä¸­çš„é’©å­å‡½æ•°"><a href="#JEST-ä¸­çš„é’©å­å‡½æ•°" class="headerlink" title="JEST ä¸­çš„é’©å­å‡½æ•°"></a>JEST ä¸­çš„é’©å­å‡½æ•°</h3><p>ä¸ä½¿ç”¨é’©å­å‡½æ•°çš„æƒ…å†µï¼Œä¼šæœ‰ä¸€äº›é—®é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªä¾‹å­ï¼š</span></span><br><span class="line">.<span class="property">js</span> æ–‡ä»¶</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">number</span> = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">addOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">number</span> += <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">minusOne</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">number</span> -= <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span> æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Counter</span> <span class="keyword">from</span> <span class="string">&#x27;./Counter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦åœ¨æµ‹è¯•ä¹‹å‰å¯¹ä¸€äº›å…¬å…±ä¿¡åˆå§‹åŒ– æ¨èä½¿ç”¨é’©å­å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="keyword">new</span> <span class="title class_">Counter</span>  <span class="comment">// è¿™æ ·åˆå§‹åŒ–æµ‹è¯•çš„æ—¶å€™å…¶å®æœ‰é—®é¢˜</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ addOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter.<span class="title function_">addOne</span>()</span><br><span class="line">  <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ minusOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter.<span class="title function_">minusOne</span>()</span><br><span class="line">  <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è¿™æ ·åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ‰§è¡Œå°±ä¼šä»¥ç¬¬ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œä¸ºæ ‡å‡†ï¼Œè€¦åˆåº¦é«˜</span></span><br><span class="line"><span class="comment">// ä¸æ˜¯æƒ³è¦å¾—åˆ°çš„ç»“æœï¼ŒaddOne + 1äº† minusOneåˆåœ¨addOneåŸºç¡€ä¸Š-1</span></span><br><span class="line"><span class="comment">// ç›¸äº’ä¹‹é—´å­˜åœ¨ä¾èµ–</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨æµ‹è¯•ä¹‹å‰å¯¹ä¸€äº›å…¬å…±ä¿¡åˆå§‹åŒ– æ¨èä½¿ç”¨é’©å­å‡½æ•° <code>beforeEach</code>ã€‚</p><ul><li><code>beforeAll( ()=&gt;&#123;&#125; )</code> ç¬¬ä¸€ä¸ªè¿è¡Œçš„é’©å­å‡½æ•°ã€‚</li><li><code>befaoreEach( ()=&gt;&#123;&#125; )</code> å½“æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å‰ï¼Œéƒ½å…ˆæ‰§è¡Œä¸‹ <code>beforeEach</code> é’©å­å‡½æ•°ã€‚</li><li><code>afterEach( ()=&gt;&#123;&#125; )</code> å½“æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œä¹‹å éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªé’©å­å‡½æ•°ã€‚</li><li><code>afterAll( ()=&gt;&#123;&#125; )</code> ç­‰å¾…æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹ç»“æŸåæ‰§è¡Œçš„é’©å­å‡½æ•°ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Counter</span> <span class="keyword">from</span> <span class="string">&#x27;./Counter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦åœ¨æµ‹è¯•ä¹‹å‰å¯¹ä¸€äº›å…¬å…±ä¿¡åˆå§‹åŒ– æ¨èä½¿ç”¨é’©å­å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter = <span class="keyword">new</span> <span class="title class_">Counter</span>() <span class="comment">// å°†åˆå§‹åŒ–å·¥ä½œæ”¾å…¥ beforeEach ä¸­</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ addOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter.<span class="title function_">addOne</span>()</span><br><span class="line">  <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ minusOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter.<span class="title function_">minusOne</span>()</span><br><span class="line">  <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(-<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>åˆ†ç»„é’©å­ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Counter</span> <span class="keyword">from</span> <span class="string">&#x27;./Counter&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦åœ¨æµ‹è¯•ä¹‹å‰å¯¹ä¸€äº›å…¬å…±ä¿¡åˆå§‹åŒ– æ¨èä½¿ç”¨é’©å­å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  counter = <span class="keyword">new</span> <span class="title class_">Counter</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;æµ‹è¯•è·ŸåŠ ç›¸å…³çš„ä»£ç &#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ addOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter.<span class="title function_">addOne</span>()</span><br><span class="line">    <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ addTwo æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter.<span class="title function_">addTwo</span>()</span><br><span class="line">    <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;æµ‹è¯•è·Ÿå‡ç›¸å…³çš„ä»£ç &#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ minusOne æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter.<span class="title function_">minusOne</span>()</span><br><span class="line">    <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(-<span class="number">1</span>)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• Counter ä¸­çš„ minusTwo æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter.<span class="title function_">minusTwo</span>()</span><br><span class="line">    <span class="title function_">expect</span>(counter.<span class="property">number</span>).<span class="title function_">toBe</span>(-<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>é’©å­å‡½æ•°çš„ä½œç”¨åŸŸï¼š</p><p>é’©å­å‡½æ•°çš„ä½œç”¨åŸŸè·Ÿä½œç”¨åŸŸé“¾çš„åŸºæœ¬å·®ä¸å¤šï¼Œæ¯ä¸€ä¸ª <code>describe</code> é‡Œé¢éƒ½å¯ä»¥æœ‰è‡ªå·±çš„é’©å­å‡½æ•°ï¼Œæœ€å¤–å±‚çš„ <code>describe</code> é‡Œé¢çš„é’©å­å‡½æ•°å¯ä»¥ä½œç”¨åŸŸå†…éƒ¨ <code>describe</code> çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><h3 id="JEST-ä¸­çš„-Mock"><a href="#JEST-ä¸­çš„-Mock" class="headerlink" title="JEST ä¸­çš„ Mock"></a>JEST ä¸­çš„ Mock</h3><p>ä½œç”¨ï¼š</p><ol><li>æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ this å’Œè°ƒç”¨é¡ºåºã€‚</li><li>å®ƒå¯ä»¥è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœã€‚</li><li>æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ æµ‹è¯• axios è¯·æ±‚ã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">runCallback</span> = (<span class="params">callback</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">callback</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .test.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; runCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• runCallbaack&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.<span class="title function_">fn</span>() <span class="comment">// jest æä¾›çš„ mock å‡½æ•°</span></span><br><span class="line">  <span class="title function_">runCallback</span>(func)</span><br><span class="line">  <span class="title function_">expect</span>(func).<span class="title function_">toBeCalled</span>() <span class="comment">// åˆ¤æ–­å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨è¿‡</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå¤šæ¬¡è°ƒç”¨</span></span><br><span class="line"><span class="keyword">import</span> &#123; runCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• runCallbaack&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.<span class="title function_">fn</span>() <span class="comment">// jest æä¾›çš„ mock å‡½æ•°</span></span><br><span class="line">  <span class="title function_">runCallback</span>(func)</span><br><span class="line">  <span class="title function_">runCallback</span>(func)</span><br><span class="line">  <span class="comment">// func.mock.calls.length æ‹¿åˆ°è°ƒç”¨çš„æ¬¡æ•°</span></span><br><span class="line">  <span class="title function_">expect</span>(func.<span class="property">mock</span>.<span class="property">calls</span>.<span class="property">length</span>).<span class="title function_">toBe</span>(<span class="number">2</span>) <span class="comment">// æ–­è¨€ æ¯”å¦‚ä¸Šé¢è°ƒç”¨äº†ä¸¤æ¬¡</span></span><br><span class="line">  <span class="comment">// ç±»ä¼¼äº expect(func).toBeCalledWith([&#x27;abc&#x27;])</span></span><br><span class="line">  <span class="comment">// åŒºåˆ«åœ¨äº ä¸Šé¢æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å‚æ•°æ˜¯ abc ä¸‹é¢æ˜¯æ¯ä¸€æ¬¡è°ƒç”¨æ˜¯ abc</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(func.<span class="property">mock</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦æ‹¿åˆ°ä¼ é€’çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// .jsæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">runCallback</span> = (<span class="params">callback</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">callback</span>(<span class="string">&#x27;abc&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span>æ–‡ä»¶</span><br><span class="line"><span class="keyword">import</span> &#123; runCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• runCallbaack&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.<span class="title function_">fn</span>();  <span class="comment">// jest æä¾›çš„ mock å‡½æ•°</span></span><br><span class="line">  <span class="title function_">runCallback</span>(func);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(func.<span class="property">mock</span>.<span class="property">calls</span>[<span class="number">0</span>]);</span><br><span class="line">  <span class="comment">// é€šè¿‡ func.mock.call[0]</span></span><br><span class="line">  <span class="title function_">expect</span>(func.<span class="property">mock</span>.<span class="property">calls</span>[<span class="number">0</span>]).<span class="title function_">toEqual</span>([<span class="string">&#x27;abc&#x27;</span>])</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœè¦å•ç‹¬è®¾ç½®è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">import</span> &#123; runCallback &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• runCallbaack&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> func = jest.<span class="title function_">fn</span>();  <span class="comment">// jest æä¾›çš„ mock å‡½æ•°</span></span><br><span class="line">  <span class="comment">// å®ƒæ”¯æŒé“¾å¼æ“ä½œ Once æ˜¯æ¯æ¬¡è®¾ç½®ä¸€ä¸ª ä¸åŠ Once å°±å…¨éƒ¨æ·»åŠ </span></span><br><span class="line">  func.<span class="title function_">mockReturnValueOnce</span>(<span class="string">&#x27;Dell&#x27;</span>)</span><br><span class="line">    .<span class="title function_">mockReturnValueOnce</span>(<span class="string">&#x27;Lee&#x27;</span>)</span><br><span class="line">    .<span class="title function_">mockReturnValueOnce</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">    <span class="comment">// è¿˜æœ‰ç§å†™æ³•æ›´åº•å±‚å¼ºæ‚ å¯ä»¥å†™ä¸€ä¸ªé€»è¾‘å¤„ç†</span></span><br><span class="line">    <span class="comment">// func.mockImplementationOnce(()=&gt;&#123;  // ä¹Ÿå¯ä»¥ä¸å¸¦Once</span></span><br><span class="line">        <span class="comment">// return &#x27;dell&#x27;</span></span><br><span class="line">        <span class="comment">// console.log(...) ç­‰ç­‰é€»è¾‘</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line">    <span class="title function_">runCallback</span>(func);</span><br><span class="line">  <span class="title function_">runCallback</span>(func);</span><br><span class="line">  <span class="title function_">runCallback</span>(func);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(func.<span class="property">mock</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>æµ‹è¯• axios è¯·æ±‚ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/api&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ---------------------------</span></span><br><span class="line">.<span class="property">test</span>.<span class="property">js</span> æ–‡ä»¶</span><br><span class="line"><span class="keyword">import</span> &#123; runCallback, createObject, getData &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;axios&#x27;</span>); <span class="comment">// jset å¯¹ axios åšä¸€ä¸ªæ¨¡æ‹Ÿ</span></span><br><span class="line">test.<span class="title function_">only</span>(<span class="string">&#x27;æµ‹è¯• getDate&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  axios.<span class="property">get</span>.<span class="title function_">mockResolvedValue</span>(&#123; <span class="attr">data</span>: <span class="string">&#x27;hello&#x27;</span> &#125;)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">getData</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(data).<span class="title function_">toBe</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦è¿”å› <code>this</code>ï¼Œå¯ä»¥ä½¿ç”¨ <code>func.mockReturnThis()</code>ï¼Œäº†è§£å³å¯ï¼</p><p><strong>mock çš„æ·±å…¥å­¦ä¹ ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//.test.js</span></span><br><span class="line"></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;./demo&#x27;</span>) <span class="comment">// ä½¿ç”¨çš„æ˜¯ __mocaks__ é‡Œé¢çš„demoæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; fetchData &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchDate æµ‹è¯•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(<span class="built_in">eval</span>(data)).<span class="title function_">toEqual</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ³¨æ„æ–°å»º __mocks__ ä¸‹é¢åœ¨å»º.jsæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;(function()&#123;return &#x27;123&#x27;&#125;())&quot;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§æ–¹æ³• ä¿®æ”¹ config.js é‡Œé¢çš„ automocak: true</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå³æœ‰éœ€è¦ <code>mock</code> çš„ <code>axios</code> è¯·æ±‚ åˆæœ‰é <code>axios</code> æ•°æ® å°±è¦è¿™ä¹ˆå†™ï¼Œä¸æ¨¡æ‹ŸçœŸå®å°±è¦ç”¨ <code>jest.requireActual</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> res.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getNumber</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .test.js</span></span><br><span class="line"></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;./demo&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> &#123; fetchData &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œä½¿ç”¨çœŸå®çš„ ./demo.js è€Œä¸æ˜¯ __mocks__é‡Œé¢çš„.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; getNumber &#125; = jest.<span class="title function_">requireActual</span>(<span class="string">&#x27;./demo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fetchDate æµ‹è¯•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(<span class="built_in">eval</span>(data)).<span class="title function_">toEqual</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‹é¢é’ˆå¯¹è¿›è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">`getNumber æµ‹è¯•`</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getNumber</span>()).<span class="title function_">toEqual</span>(<span class="number">123</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>mock timers</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> (callback) =&gt; &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">callback</span>()</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">callback</span>()</span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .test.js æ–‡ä»¶</span></span><br><span class="line"><span class="comment">// è§£å†³æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line"><span class="keyword">import</span> timer <span class="keyword">from</span> <span class="string">&#x27;./timer&#x27;</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">jest.<span class="title function_">useFakeTimers</span>()</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;timer æµ‹è¯•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = jest.<span class="title function_">fn</span>()</span><br><span class="line">  <span class="title function_">timer</span>(fn)</span><br><span class="line">  <span class="comment">// ä½¿å®šæ—¶å™¨ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">  jest.<span class="title function_">runAllTimers</span>()</span><br><span class="line">  <span class="comment">// å¸Œæœ›è¢«è°ƒç”¨å‡ æ¬¡ï¼Œå› ä¸ºä¸Šé¢.jsè°ƒç”¨äº†ä¸¤æ¬¡</span></span><br><span class="line">  <span class="title function_">expect</span>(fn).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ¨èè§£å†³æ–¹æ¡ˆï¼š</span></span><br><span class="line"><span class="keyword">import</span> timer <span class="keyword">from</span> <span class="string">&#x27;./timer&#x27;</span></span><br><span class="line">jest.<span class="title function_">useFakeTimers</span>()</span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;timer æµ‹è¯•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = jest.<span class="title function_">fn</span>()</span><br><span class="line">  <span class="title function_">timer</span>(fn)</span><br><span class="line">  <span class="comment">// è®©æ—¶é—´å¿«è¿›è®¾ç½®çš„å»¶æ—¶æ—¶é—´</span></span><br><span class="line">  jest.<span class="title function_">advanceTimersByTime</span>(<span class="number">3000</span>)</span><br><span class="line">  <span class="title function_">expect</span>(fn).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">1</span>)</span><br><span class="line">  jest.<span class="title function_">advanceTimersByTime</span>(<span class="number">3000</span>)</span><br><span class="line">  <span class="title function_">expect</span>(fn).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// -----------  åˆ†å‰²çº¿  ------------</span></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³æ¯ä¸ªæµ‹è¯•äº’ä¸å½±å“ï¼Œå› ä¸ºæ¨èè§£å†³æ–¹æ¡ˆä¼šåŸºäºä¸Šæ¬¡ç»“æŸå†æ¬¡æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> timer <span class="keyword">from</span> <span class="string">&#x27;./timer&#x27;</span></span><br><span class="line"><span class="comment">// å°†å®ƒåŒ…è£¹åœ¨ beforeEach é’©å­å‡½æ•°ä¸­</span></span><br><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  jest.<span class="title function_">useFakeTimers</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;timer æµ‹è¯•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = jest.<span class="title function_">fn</span>()</span><br><span class="line">  <span class="title function_">timer</span>(fn)</span><br><span class="line">  <span class="comment">// è®©æ—¶é—´å¿«è¿›è®¾ç½®çš„å»¶æ—¶æ—¶é—´</span></span><br><span class="line">  jest.<span class="title function_">advanceTimersByTime</span>(<span class="number">3000</span>)</span><br><span class="line">  <span class="title function_">expect</span>(fn).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">1</span>)</span><br><span class="line">  jest.<span class="title function_">advanceTimersByTime</span>(<span class="number">3000</span>)</span><br><span class="line">  <span class="title function_">expect</span>(fn).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JEST-ä¸­çš„-Snapshop-å¿«ç…§æµ‹è¯•"><a href="#JEST-ä¸­çš„-Snapshop-å¿«ç…§æµ‹è¯•" class="headerlink" title="JEST ä¸­çš„ Snapshop å¿«ç…§æµ‹è¯•"></a>JEST ä¸­çš„ Snapshop å¿«ç…§æµ‹è¯•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">generateConfig</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">server</span>: <span class="string">&#x27;http://localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">post</span>: <span class="number">8080</span>,</span><br><span class="line">    <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//.test.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; generateConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• generateConfig&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">generateConfig</span>()).<span class="title function_">toMatchSnapshot</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ä¼šç”Ÿæˆå¯¹åº”çš„å¿«ç…§æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p><strong>å½“é…ç½®æ–‡ä»¶æ˜¯å˜åŒ–çš„æƒ…å†µä¸‹ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">generateConfig</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">server</span>: <span class="string">&#x27;http://localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">post</span>: <span class="number">8080</span>,</span><br><span class="line">    <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">generateConfig1</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">server</span>: <span class="string">&#x27;http://localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">post</span>: <span class="number">8086</span>,</span><br><span class="line">    <span class="attr">domain</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// .test.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; generateConfig, generateConfig1 &#125; <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• generateConfig&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">generateConfig</span>()).<span class="title function_">toMatchSnapshot</span>(&#123;</span><br><span class="line">    <span class="attr">time</span>: expect.<span class="title function_">any</span>(<span class="title class_">Date</span>),</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• generateConfig1&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">generateConfig1</span>()).<span class="title function_">toMatchSnapshot</span>(&#123;</span><br><span class="line">    <span class="attr">time</span>: expect.<span class="title function_">any</span>(<span class="title class_">Date</span>),</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>è¡Œå†…å¿«ç…§ toMatchInlineSnapshot</strong></p><p>å®‰è£…æ¨¡å— <code>npm install prettier@1.18.2 --save</code></p><p>æ —å¦‚ä¸‹ï¼šæ”¾åœ¨åˆ°æµ‹è¯•ç”¨ä¾‹ä¸‹é¢</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• generateConfig1&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">generateConfig1</span>()).<span class="title function_">toMatchInlineSnapshot</span>(</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">time</span>: expect.<span class="title function_">any</span>(<span class="title class_">Date</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">`  // è¡Œå†…å¿«ç…§ æ”¾åˆ°äº†æµ‹è¯•ç”¨ä¾‹ä¸‹é¢</span></span><br><span class="line"><span class="string">    Object &#123;</span></span><br><span class="line"><span class="string">      &quot;domain&quot;: &quot;localhost&quot;,</span></span><br><span class="line"><span class="string">      &quot;post&quot;: 8086,</span></span><br><span class="line"><span class="string">      &quot;server&quot;: &quot;http://localhost&quot;,</span></span><br><span class="line"><span class="string">      &quot;time&quot;: Any&lt;Date&gt;,</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ES6-ä¸­-ç±»çš„æµ‹è¯•-ï¼ˆå•å…ƒæµ‹è¯•ï¼‰"><a href="#ES6-ä¸­-ç±»çš„æµ‹è¯•-ï¼ˆå•å…ƒæµ‹è¯•ï¼‰" class="headerlink" title="ES6 ä¸­ ç±»çš„æµ‹è¯• ï¼ˆå•å…ƒæµ‹è¯•ï¼‰"></a>ES6 ä¸­ ç±»çš„æµ‹è¯• ï¼ˆå•å…ƒæµ‹è¯•ï¼‰</h3><p>å•å…ƒæµ‹è¯•å°±æ˜¯åˆ©ç”¨ <code>mock</code> æ¥æå‡æ€§èƒ½çš„æµ‹è¯•ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// util.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">  <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...å¾ˆå¤æ‚çš„é€»è¾‘</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...å¾ˆå¤æ‚çš„é€»è¾‘</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Util</span></span><br><span class="line"><span class="comment">// util.test.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span></span><br><span class="line"><span class="keyword">let</span> util = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">beforeAll</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  util = <span class="keyword">new</span> <span class="title class_">Util</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• a æ–¹æ³•&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// expect(util.a(1, 2)).toBe(&#x27;12&#x27;);</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">testFunction</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> util = <span class="keyword">new</span> <span class="title class_">Util</span>();</span><br><span class="line">  util.<span class="title function_">a</span>(a);</span><br><span class="line">  util.<span class="title function_">b</span>(b);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> testFunction;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .test.test.js</span></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;./util&#x27;</span>);</span><br><span class="line"><span class="comment">// åº•å±‚ä¼šæŠŠ Utilä¸‹é¢çš„a,bä¼šå˜æˆ jest.fn.a/b</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Util</span> <span class="keyword">from</span> <span class="string">&#x27;./util&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> testFunction <span class="keyword">from</span> <span class="string">&#x27;./test&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• testFunction&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">testFunction</span>();</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title class_">Util</span>).<span class="title function_">toHaveBeenCalled</span>();</span><br><span class="line">  <span class="comment">// é’ˆå¯¹ä¸Šæ–‡çš„ç±»ä¸­çš„ä¸¤ä¸ªæ–¹æ³•a/bè¿›è¡Œæµ‹è¯•</span></span><br><span class="line">  <span class="title function_">expect</span>(<span class="title class_">Util</span>.<span class="property">mock</span>.<span class="property">instances</span>[<span class="number">0</span>].<span class="property">a</span>).<span class="title function_">toHaveBeenCalled</span>();</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title class_">Util</span>.<span class="property">mock</span>.<span class="property">instances</span>[<span class="number">0</span>].<span class="property">b</span>).<span class="title function_">toHaveBeenCalled</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="JEST-ä¸­å¯¹-DOM-è¿›è¡Œæµ‹è¯•"><a href="#JEST-ä¸­å¯¹-DOM-è¿›è¡Œæµ‹è¯•" class="headerlink" title="JEST ä¸­å¯¹ DOM è¿›è¡Œæµ‹è¯•"></a>JEST ä¸­å¯¹ DOM è¿›è¡Œæµ‹è¯•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .js</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addDivToBody</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  $(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">append</span>(<span class="string">&#x27;&lt;div&gt;&lt;/div&gt;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> addDivToBody</span><br><span class="line"></span><br><span class="line"><span class="comment">//.test.js</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"><span class="keyword">import</span> addDivToBody <span class="keyword">from</span> <span class="string">&#x27;./demo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;æµ‹è¯• addDivToBody&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">addDivToBody</span>()</span><br><span class="line">  <span class="title function_">expect</span>($(<span class="string">&#x27;body&#x27;</span>).<span class="title function_">find</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">length</span>).<span class="title function_">toBe</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Vue-ä¸­çš„-TDD"><a href="#Vue-ä¸­çš„-TDD" class="headerlink" title="Vue ä¸­çš„ TDD"></a>Vue ä¸­çš„ TDD</h2><h3 id="Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘"><a href="#Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘" class="headerlink" title="Test Driven Development (TDD) æµ‹è¯•é©±åŠ¨å¼€å‘"></a>Test Driven Development (TDD) æµ‹è¯•é©±åŠ¨å¼€å‘</h3><p>TDD å¼€å‘æµç¨‹ ï¼ˆRed-Greenï¼‰ ä»çº¢åˆ°ç»¿çš„ä¸€ç§å¼€å‘æ¨¡å¼ï¼Œå› ä¸ºå‰æœŸæµ‹è¯•ä»£ç ä¸€ç‰‡çº¢ã€‚</p><ol><li>ç¼–å†™æµ‹è¯•ç”¨ä¾‹</li><li>è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡æµ‹è¯•</li><li>ç¼–å†™ä»£ç ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹é€šè¿‡</li><li>ä¼˜åŒ–ä»£ç ï¼Œå®Œæˆå¼€å‘</li><li>é‡å¤ä¸Šè¿°æ­¥éª¤</li></ol><p><strong>TDD çš„ä¼˜åŠ¿ï¼š</strong></p><ul><li>é•¿æœŸå‡å°‘å›å½’ bug (ç¼–å†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œæµ‹è¯•ä»£ç åŠæ—¶æç¤º)ã€‚</li><li>ä»£ç è´¨é‡æ›´å¥½ï¼ˆç»„ç»‡ï¼Œå¯ç»´æŠ¤æ€§ï¼‰ã€‚</li><li>æµ‹è¯•è¦†ç›–ç‡é«˜ã€‚</li><li>é”™è¯¯çš„æµ‹è¯•ä»£ç ä¸å®¹æ˜“å‡ºç°ã€‚</li></ul><h3 id="Vue-ç¯å¢ƒä¸­é…ç½®-JEST"><a href="#Vue-ç¯å¢ƒä¸­é…ç½®-JEST" class="headerlink" title="Vue ç¯å¢ƒä¸­é…ç½® JEST"></a>Vue ç¯å¢ƒä¸­é…ç½® JEST</h3><p><code>package.json</code> ä¸­ <code>test:unit</code> å°¾éƒ¨æ·»åŠ  <code>--watch</code>ã€‚</p><p><code>@vue/test-utils</code> çš„é…ç½®åŠä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹ jest.config.js é…ç½®æ–‡ä»¶å¦‚ä¸‹ä¿¡æ¯ï¼š</span></span><br><span class="line"><span class="attr">testMatch</span>: [</span><br><span class="line">  <span class="string">&#x27;**/tests/unit/**/*.(spec|test).(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx)&#x27;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>ç”¨ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æµ…æ¸²æŸ“ï¼Œåªä¼šæ¸²æŸ“å½“å‰ç»„ä»¶ï¼Œä¸ä¼šå½±å“å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"><span class="comment">// åªå¯¹å½“å‰ç»„ä»¶ HelloWorld ç»„ä»¶è¿›è¡Œæµ…æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">HelloWorld</span>, &#123;</span><br><span class="line">  <span class="attr">propsData</span>: &#123; msg &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// wrapper çš„å‡ ä¸ªæ–¹æ³•</span></span><br><span class="line">wrapper.<span class="title function_">text</span>() å¯ä»¥å¾—åˆ°å½“å‰ç»„ä»¶çš„æ–‡æœ¬ä¿¡æ¯</span><br><span class="line">wrapper.<span class="title function_">props</span>(<span class="string">&#x27;msg&#x27;</span>) ä¹Ÿå¯ä»¥æ‹¿åˆ°å¯¹åº”çš„ props ä¿¡æ¯</span><br><span class="line">wrapper.<span class="title function_">setProps</span>(&#123;<span class="attr">msg</span>: <span class="string">&#x27;hello&#x27;</span>&#125;)</span><br><span class="line">wrapper.<span class="title function_">find</span>() å¯ä»¥æŸ¥æ‰¾å®ƒçš„ç±»åç­‰ä¿¡æ¯</span><br><span class="line">wrapper.<span class="title function_">findAll</span>() åŒä¸Š æŸ¥è¯¢å¤šä¸ª</span><br><span class="line"><span class="comment">// ä½¿ç”¨findAllæ‹¿æ•°æ®è¦è¿™æ ·æ‹¿è®°å¾— at()----&gt; expect(countElem.at(0).text()).toEqual(&#x27;0&#x27;)</span></span><br><span class="line"><span class="title function_">expect</span>(wrapper).<span class="title function_">toMatchSnapshot</span>()  å¿«ç…§æµ‹è¯•</span><br><span class="line"><span class="comment">// æ·±æ¸²æŸ“ï¼Œå¯¹å­ç»„ä»¶ä¹Ÿä¼šå½±å“</span></span><br><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨çš„ä¸€äº›-API"><a href="#å¸¸ç”¨çš„ä¸€äº›-API" class="headerlink" title="å¸¸ç”¨çš„ä¸€äº› API"></a>å¸¸ç”¨çš„ä¸€äº› API</h3><ul><li><code>const input = wrapper.find(&#39;[data-test=&quot;input&quot;]&#39;)</code> è‡ªå®šä¹‰ input å±æ€§ åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ã€‚</li><li><code>expect(input.exists()).toBe(true)</code> åˆ¤æ–­ <code>input</code> æ˜¯å¦å­˜åœ¨ã€‚</li><li><code>wrapper.vm.$data.</code> æ–¹å¼æ‹¿åˆ° <code>vue</code> é‡Œé¢ç»„ä»¶çš„ <code>data</code> å®ä¾‹çš„å±æ€§ã€‚</li><li><code>input.setValue(&#39;&#39;)</code> è®¾ç½® <code>input</code> çš„å±æ€§ã€‚</li><li><code>input.trigger(&#39;keyup.enter&#39;)</code> è§¦å‘ä¸€ä¸ªæ–¹æ³•ï¼Œæ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å›è½¦ã€‚</li><li><code>expect(wrapper.emitted().add).toBeFalsy()</code> åˆ¤æ–­æ˜¯å¦æœ‰è§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</li><li><code>wrapper.vm.</code>æ–¹æ³•å æ–¹å¼æ‹¿åˆ° <code>vue</code> é‡Œé¢ç»„ä»¶çš„ <code>methods</code> çš„æ–¹æ³•ã€‚</li></ul><p>å®ä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; shallowMount &#125; <span class="keyword">from</span> <span class="string">&#x27;@vue/test-utils&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;../../components/Header&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;Header åŒ…å« input æ¡†&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Header</span>)</span><br><span class="line">  <span class="comment">// é€šè¿‡è‡ªå®šä¹‰å±æ€§æ¥åŒºåˆ†æ˜¯å¦æœ‰è¿™ä¸ªæ ‡ç­¾</span></span><br><span class="line">  <span class="keyword">const</span> input = wrapper.<span class="title function_">find</span>(<span class="string">&#x27;[data-test=&quot;input&quot;]&#x27;</span>)</span><br><span class="line">  <span class="comment">// input æ˜¯å¦å­˜åœ¨ API åœ¨ vue-test-utils</span></span><br><span class="line">  <span class="title function_">expect</span>(input.<span class="title function_">exists</span>()).<span class="title function_">toBe</span>(<span class="literal">true</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;Header ä¸­ input æ¡†åˆå§‹å†…å®¹ä¸ºç©º&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Header</span>)</span><br><span class="line">  <span class="comment">// æ‰¾åˆ°è¿™ä¸ª new çš„å®ä¾‹</span></span><br><span class="line">  <span class="comment">// é€šè¿‡ wrapper.vn.$data æ‹¿åˆ° VUE å®ä¾‹é‡Œé¢ data çš„å±æ€§</span></span><br><span class="line">  <span class="keyword">const</span> inputValue = wrapper.<span class="property">vm</span>.<span class="property">$data</span>.<span class="property">inputValue</span></span><br><span class="line">  <span class="title function_">expect</span>(inputValue).<span class="title function_">toBe</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;Header ä¸­ input æ¡†è¾“å…¥å›è½¦ æ— å†…å®¹æ—¶ï¼Œæ— ååº”&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Header</span>)</span><br><span class="line">  <span class="keyword">const</span> input = wrapper.<span class="title function_">find</span>(<span class="string">&#x27;[data-test=&quot;input&quot;]&#x27;</span>)</span><br><span class="line">  <span class="comment">// è®¾ç½® input çš„å±æ€§</span></span><br><span class="line">  input.<span class="title function_">setValue</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="comment">// è§¦å‘ä¸€ä¸ªæ–¹æ³• æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å›è½¦</span></span><br><span class="line">  input.<span class="title function_">trigger</span>(<span class="string">&#x27;keyup.enter&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="title function_">emitted</span>().<span class="property">add</span>).<span class="title function_">toBeFalsy</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;Header ä¸­ input æ¡†è¾“å…¥å›è½¦ æœ‰å†…å®¹æ—¶ï¼Œå‘å¤–è§¦å‘äº‹ä»¶&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Header</span>)</span><br><span class="line">  <span class="keyword">const</span> input = wrapper.<span class="title function_">find</span>(<span class="string">&#x27;[data-test=&quot;input&quot;]&#x27;</span>)</span><br><span class="line">  input.<span class="title function_">setValue</span>(<span class="string">&#x27;dell lee&#x27;</span>)</span><br><span class="line">  <span class="comment">// è§¦å‘ä¸€ä¸ªæ–¹æ³• æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å›è½¦</span></span><br><span class="line">  input.<span class="title function_">trigger</span>(<span class="string">&#x27;keyup.enter&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="title function_">emitted</span>().<span class="property">add</span>).<span class="title function_">toBeTruthy</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&#x27;Header ä¸­ input æ¡†è¾“å…¥å›è½¦ æœ‰å†…å®¹æ—¶ï¼Œå‘å¤–è§¦å‘äº‹ä»¶ åŒæ—¶æ¸…ç©º inputValue&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> wrapper = <span class="title function_">shallowMount</span>(<span class="title class_">Header</span>)</span><br><span class="line">  <span class="keyword">const</span> input = wrapper.<span class="title function_">find</span>(<span class="string">&#x27;[data-test=&quot;input&quot;]&#x27;</span>)</span><br><span class="line">  input.<span class="title function_">setValue</span>(<span class="string">&#x27;dell lee&#x27;</span>)</span><br><span class="line">  <span class="comment">// è§¦å‘ä¸€ä¸ªæ–¹æ³• æ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥å›è½¦</span></span><br><span class="line">  input.<span class="title function_">trigger</span>(<span class="string">&#x27;keyup.enter&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(wrapper.<span class="property">vm</span>.<span class="property">$data</span>.<span class="property">inputValue</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>npm run lint --fix</code> ä¼šè‡ªåŠ¨æŠŠä¸è§„èŒƒçš„ä»£ç  æŒ‰ç…§ <code>lint</code> è‡ªåŠ¨è§„èŒƒåŒ–ä»£ç ã€‚</p></article><div class="trm-reward"><span class="trm-reward-btn trm-glow" onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'><i class="iconfont fas fa-hand-holding-usd"></i></span><p class="trm-reward-comment">æˆ‘å¾ˆå¯çˆ±ï¼Œè¯·ç»™æˆ‘é’±</p><div id="qr" style="display:none"><div style="display:inline-block"><a rel="noopener" href="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/weixin-pay.png" target="_blank"><img src="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/weixin-pay.png" alt="å¾®ä¿¡" loading="lazy"></a><p>å¾®ä¿¡</p></div><div style="display:inline-block"><a rel="noopener" href="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/zhifubao-pay.png" target="_blank"><img src="https://cheny-chenyu.oss-cn-chengdu.aliyuncs.com/img/zhifubao-pay.png" alt="æ”¯ä»˜å®" loading="lazy"></a><p>æ”¯ä»˜å®</p></div></div></div><ul class="trm-post-copyright"><li class="trm-post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong> CHENY</li><li class="trm-post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a id="original-link" href="https://www.yangchenyu.top/auto-test/test/" title="å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯• ã€JESTã€‘">https://www.yangchenyu.top/auto-test/test/</a></li><li class="trm-post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong> æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 ">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚</li></ul></div><div id="post-next-prev" class="row"><div class="col-lg-12"><h5 class="trm-title-with-divider">å…¶ä»–æ–‡ç«  <span data-number="02"></span></h5></div><div class="col-lg-6"><div class="trm-blog-card trm-scroll-animation" data-scroll data-scroll-offset="40"><a href="/record/flutter_basic_widget/" class="trm-cover-frame trm-anima-link"><img alt="cover" class="no-fancybox" src="https://images.unsplash.com/photo-1592424002053-21f369ad7fdb?ixid=Mnw4OTgyNHwwfDF8c2VhcmNofDM2fHxjb2RlfGVufDB8fHx8MTY1MDEyNTAxMg&ixlib=rb-1.2.1&w=750&dpi=2"></a><div class="trm-card-descr"><div class="trm-label trm-category trm-mb-20"><a href="/categories/%E8%AE%B0%E5%BD%95%E7%B1%BB/">è®°å½•ç±»</a></div><h5><a href="/record/flutter_basic_widget/" class="trm-anima-link">Flutter å¸¸ç”¨å°éƒ¨ä»¶(ä¸€)</a></h5><div class="trm-divider trm-mb-20 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>21/01/08</li><li>22:23</li></ul></div></div></div><div class="col-lg-6"><div class="trm-blog-card trm-scroll-animation" data-scroll data-scroll-offset="40"><a href="/record/vue_keep_alive/" class="trm-cover-frame trm-anima-link"><img alt="cover" class="no-fancybox" src="https://images.unsplash.com/photo-1467232004584-a241de8bcf5d?ixid=Mnw4OTgyNHwwfDF8c2VhcmNofDh8fHdlYnxlbnwwfHx8fDE2NTAxMjU0OTk&ixlib=rb-1.2.1&w=750&dpi=2"></a><div class="trm-card-descr"><div class="trm-label trm-category trm-mb-20"><a href="/categories/%E8%AE%B0%E5%BD%95%E7%B1%BB/">è®°å½•ç±»</a></div><h5><a href="/record/vue_keep_alive/" class="trm-anima-link">keep-alive ä¸ router-view</a></h5><div class="trm-divider trm-mb-20 trm-mt-20"></div><ul class="trm-card-data trm-label"><li>20/12/07</li><li>20:07</li></ul></div></div></div></div><div class="trm-divider footer-divider"></div><footer class="trm-scroll-animation" data-scroll data-scroll-offset="50"><div class="trm-footer-item"><span>Â© 2019- 2026</span> <span class="footer-separator" data-separator=" Â· "></span> <span class="trm-accent-color">CHENY</span></div><div class="trm-footer-item"><span>ç”± <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> é©±åŠ¨ v5.4.2 </span><span class="footer-separator" data-separator=" | "></span> <span>ä¸»é¢˜ - <a rel="noopener" href="https://github.com/MaLuns/hexo-theme-async" target="_blank">Async</a> v1.2.14</span></div><div class="trm-footer-item">åšå®¢å·²èŒèŒå“’è¿è¡Œ <span id="since" class="trm-accent-color"></span> å¤©</div></footer><script>function show_date_time(){BirthDay=new Date("11/19/2019 17:00:00"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),msPerDay=864e5,day=Math.floor(timeold/msPerDay),since.innerHTML=day}show_date_time()</script></div></div></div></div></div><div class="trm-fixed-container" data-scroll data-scroll-sticky data-scroll-target=".locomotive-scroll__sticky-target" data-scroll-offset="-10"><div class="trm-fixed-btn" data-title="é˜…è¯»æ¨¡å¼" onclick="switchReadMode()"><i class="iconfont fas fa-book-reader"></i></div></div></div></div></div></div><div id="trm-back-top" class="trm-back-top" data-title="å›åˆ°é¡¶éƒ¨"><i class="iconfont fas fa-arrow-up"></i></div><div class="trm-search-popup"><div class="trm-search-header"><span class="trm-search-popup-btn-close"><i class="iconfont fas fa-times"></i></span></div><div class="form trm-search-form"><input class="trm-search-input" type="text" placeholder="æœç´¢..."></div><div class="trm-search-result-container"></div></div><script src="https://unpkg.com/swup@2.0.19/dist/swup.min.js"></script><script src="https://unpkg.com/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script><script src="https://unpkg.com/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script><script src="/js/plugins/typing.js?v=1.2.14"></script><script src="https://unpkg.com/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/plugins/local_search.js?v=1.2.14"></script><script src="//code.tidio.co/het7qhit6brc6kwukrbcbtltwr9xhcty.js" async></script><script id="async-script" src="/js/main.js?v=1.2.14"></script></body></html>